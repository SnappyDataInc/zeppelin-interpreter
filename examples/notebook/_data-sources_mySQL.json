{"paragraphs":[{"title":"STEP I: Register the dataset using below MySQL access options","text":"%snappydata\n{\nval datasetName = z.input(\"Enter Name for the Dataset:\", \"AirlineRef\").asInstanceOf[String]\nval url = z.input(\"Enter JDBC URL for MySQL:\", \"jdbc:mysql://localhost/\")\nval database = z.input(\"Enter Database Name:\", \"my-database\").asInstanceOf[String]\nval mySqlTable = z.input(\"Enter Table Name:\", \"AirlineDataWithRowID\")\nval user = z.input(\"Enter User:\", \"my-user\")\nval password = z.input(\"Enter Password:\", \"my-password\")\nz.put(\"mySqlTable\", mySqlTable)\nz.put(\"datasetName\", datasetName)\n\nval urlWithDB = url + database\n\nz.put(\"urlWithDB\",urlWithDB)\nz.put(\"user\" ,user)\nz.put(\"password\",password)\n\nvar connectionString =s\"create external table $datasetName using JDBC options (url '$urlWithDB', dbtable '$mySqlTable', user '$user', password '$password', driver 'com.mysql.jdbc.Driver'\"\nz.put(\"connectionString\",connectionString)\n}\n","dateUpdated":"2018-12-20T10:40:33+0530","config":{"tableHide":true,"editorSetting":{"language":"text","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/text","editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{"Name the dataset being created:":"db4","JDBC URL for MySQL:":"jdbc:mysql://localhost:3306/","Database:":"info1","Table:":"emp","User:":"root","password:":"vk@18","JDBC URL for Postgres:":"jdbc:mysql://localhost/","Password:":"my-password","Enter name for the dataset being created:":"df3","Enter JDBC URL for Postgres:":"jdbc:mysql://localhost/","Enter Database Name:":"myDB","Enter Table Name:":"AGENTS","Enter User:":"root","Enter Password:":"root","Enter Name for the Dataset:":"agentsDataset","Enter JDBC URL for Mysql:":"jdbc:mysql://localhost/","Enter JDBC URL for MySQL:":"jdbc:mysql://localhost/"},"forms":{"Enter Name for the Dataset:":{"name":"Enter Name for the Dataset:","displayName":"Enter Name for the Dataset:","type":"input","defaultValue":"AirlineRef","hidden":false,"$$hashKey":"object:50448"},"Enter JDBC URL for MySQL:":{"name":"Enter JDBC URL for MySQL:","displayName":"Enter JDBC URL for MySQL:","type":"input","defaultValue":"jdbc:mysql://localhost/","hidden":false,"$$hashKey":"object:50449"},"Enter Database Name:":{"name":"Enter Database Name:","displayName":"Enter Database Name:","type":"input","defaultValue":"my-database","hidden":false,"$$hashKey":"object:50450"},"Enter Table Name:":{"name":"Enter Table Name:","displayName":"Enter Table Name:","type":"input","defaultValue":"AirlineDataWithRowID","hidden":false,"$$hashKey":"object:50451"},"Enter User:":{"name":"Enter User:","displayName":"Enter User:","type":"input","defaultValue":"my-user","hidden":false,"$$hashKey":"object:50452"},"Enter Password:":{"name":"Enter Password:","displayName":"Enter Password:","type":"input","defaultValue":"my-password","hidden":false,"$$hashKey":"object:50453"}}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1545223585182_1457859","id":"20180612-104002_1007541269","dateCreated":"2018-12-19T18:16:25+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:50315"},{"title":"STEP II: Enter additional parameters here...","text":"%snappydata\n{ \nvar flag:Boolean=false\nvar key:String=\" \"\nvar value:String=\" \"\nvar map1:Map[String,String] = Map()\nval datasetName =z.get(\"datasetName\").asInstanceOf[String]\nval mySqlTable=z.get(\"mySqlTable\").asInstanceOf[String]\nval user=z.get(\"user\").asInstanceOf[String]\nval password=z.get(\"password\").asInstanceOf[String]\nval urlWithDB=z.get(\"urlWithDB\").asInstanceOf[String]\nval ss = new org.apache.spark.sql.SnappySession(snc.sparkContext)\nval parameterString = z.input(\"Enter optional parameters in the form of <key>=<value> separated by comma (,)\", \"\").asInstanceOf[String]\n\n\nif(parameterString != \"\"){\nfor (returnValue <- parameterString.split(\",\"))\n{\n  for(ret <- returnValue.split(\"=\"))\n    {\n      if(flag==false)\n      {\n        key=ret\n        \n        flag=true\n      }\n      else\n      {\n        value=ret\n        flag=false\n       }\n    }\n map1 += key -> value\n }\n    var stringToConcat = \"\"\n    map1.keys.foreach{ j =>\n    var temp=j\n    var temp2=map1(j)\n     stringToConcat += \",\"+temp+\" \"+\"'\"+temp2+\"'\"\n    }\n     \n\nss.sql(s\"drop table if exists $datasetName\")\n\nval connectionString=z.get(\"connectionString\").asInstanceOf[String]\nval connectionString2=connectionString.concat(stringToConcat)\nval finalConnectionString=connectionString2.concat(\")\")\nss.sql(finalConnectionString)\n\n}\nelse{\n println(\"No extra parameters added.\")\n ss.sql(s\"drop table if exists $datasetName\")\n ss.sql(s\"create external table $datasetName using JDBC options (url '$urlWithDB', dbtable '$mySqlTable', user '$user', password '$password', driver 'com.mysql.jdbc.Driver')\")\n}\nprintln\nprintln(s\"External table named $datasetName registered.\")\nprintln(s\"====== Schema for $datasetName ======\")\nss.table(datasetName).printSchema\n}\n\n\n","dateUpdated":"2018-12-20T10:39:15+0530","config":{"tableHide":true,"editorSetting":{"language":"text","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/text","editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{"Give list of parameters:":" ","Enter optional parameters in the form of <key>=<value> separated by comma (,)":"port=3306"},"forms":{"Enter optional parameters in the form of <key>=<value> separated by comma (,)":{"name":"Enter optional parameters in the form of <key>=<value> separated by comma (,)","displayName":"Enter optional parameters in the form of <key>=<value> separated by comma (,)","type":"input","defaultValue":"","hidden":false,"$$hashKey":"object:50525"}}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nExternal table named agentsDataset registered.\n====== Schema for agentsDataset ======\nroot\n |-- AGENT_CODE: string (nullable = false)\n |-- AGENT_NAME: string (nullable = true)\n |-- WORKING_AREA: string (nullable = true)\n |-- COMMISSION: integer (nullable = true)\n |-- PHONE_NO: string (nullable = true)\n |-- COUNTRY: string (nullable = true)\n\n"}]},"apps":[],"jobName":"paragraph_1545223585183_1073110","id":"20180925-120142_920418608","dateCreated":"2018-12-19T18:16:25+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:50316"},{"title":"STEP III: Lets take a look at some sample data","text":"%snappydata\nprintln(s\"\"\"%html\n<p>Records from the dataset Created</p>\"\"\")\nval dfm=z.get(\"datasetName\").asInstanceOf[String]\nval dfs = snc.table(dfm)\nz.show(dfs)","dateUpdated":"2018-12-20T10:39:15+0530","config":{"editorSetting":{"language":"text","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/text","editorHide":true,"title":true,"results":{},"enabled":true,"tableHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Records from the dataset Created</p>\ndfm: String = agentsDataset\ndfs: org.apache.spark.sql.DataFrame = [AGENT_CODE: string, AGENT_NAME: string ... 4 more fields]\n"},{"type":"TABLE","data":"AGENT_CODE\tAGENT_NAME\tWORKING_AREA\tCOMMISSION\tPHONE_NO\tCOUNTRY\nA001\tSubbarao\tBangalore\t0\t077-12346674\t\nA002\tMukesh\tMumbai\t0\t029-12358964\t\nA003\tAlex\tLondon\t0\t075-12458969\t\nA004\tIvan\tTorento\t0\t008-22544166\t\nA005\tAnderson\tBrisban\t0\t045-21447739\t\nA006\tMcDen\tLondon\t0\t078-22255588\t\nA007\tRamasundar\tBangalore\t0\t077-25814763\t\nA008\tAlford\tNew York\t0\t044-25874365\t\nA009\tBenjamin\tHampshair\t0\t008-22536178\t\nA010\tSantakumar\tChennai\t0\t007-22388644\t\nA011\tRavi Kumar\tBangalore\t0\t077-45625874\t\nA012\tLucida\tSan Jose\t0\t044-52981425\t\n"}]},"apps":[],"jobName":"paragraph_1545223585186_-12393101","id":"20180612-105322_489570796","dateCreated":"2018-12-19T18:16:25+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:50317"},{"title":"STEP IV: Cache the data in SnappyData Column/Row table","text":"%snappydata\n{\nimport org.apache.spark.sql.SnappySession\n\nval ss = new SnappySession(snc.sparkContext)\n\nval datasetName = z.get(\"datasetName\")\nval tabName = datasetName+ \"_cache\"\n\nval tableType = z.select(\"SnappyData Table type\", Seq((\"column\" ,\"Column\"),\n                                                    (\"row\",\"row\"))).asInstanceOf[String]\n\nss.sql(s\"drop table if exists $tabName\")\nss.sql(s\"create table $tabName using $tableType as select * from $datasetName\" )\n\nprintln(s\"Created table named $tabName\")\nprintln(\"With row count = \" + ss.table(s\"$tabName\").count )\n}","dateUpdated":"2018-12-20T10:39:15+0530","config":{"tableHide":true,"editorSetting":{"language":"text","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/text","editorHide":true,"title":true,"runOnSelectionChange":true,"results":{},"enabled":true},"settings":{"params":{"SnappyData Table type":"column"},"forms":{"SnappyData Table type":{"name":"SnappyData Table type","displayName":"SnappyData Table type","type":"select","defaultValue":"","options":[{"value":"column","displayName":"Column","$$hashKey":"object:50661"},{"value":"row","displayName":"row","$$hashKey":"object:50662"}],"hidden":false,"$$hashKey":"object:50653"}}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Created table named agentsDataset_cache\nWith row count = 12\n"}]},"apps":[],"jobName":"paragraph_1545223585187_-12777850","id":"20180612-110449_1554543799","dateCreated":"2018-12-19T18:16:25+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:50318"},{"text":"%snappydata\n","dateUpdated":"2018-12-20T10:39:15+0530","config":{"colWidth":12,"editorMode":"ace/mode/text","results":{},"enabled":true,"editorSetting":{"language":"text","editOnDblClick":false},"editorHide":true,"tableHide":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1545223585187_-12777850","id":"20181031-164840_1776521028","dateCreated":"2018-12-19T18:16:25+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:50319"}],"name":"/data-sources/mySQL","id":"2DXXXNZUV","angularObjects":{"2DPH14A65:shared_process":[],"2DPGQSV7A:shared_process":[],"2DS3UYT9A:shared_process":[],"2DQJMX5DQ:shared_process":[],"2DQ81BPY5:shared_process":[],"2DS5QXNYN:existing_process":[],"2DQ7ZYMVJ:shared_process":[],"2DS5FRHTM:shared_process":[],"2DR9MGEP5:shared_process":[],"2DR5HDZ47:shared_process":[],"2DQJ6875T:shared_process":[],"2DPZS7MR2:shared_process":[],"2DQDKNSAD:shared_process":[],"2DSC5C8CE:shared_process":[],"2DPQT3RH5:shared_process":[],"2DS6XQYQV:shared_process":[],"2DP184Y6B:shared_process":[],"2DRQMH9ND:shared_process":[],"2DSHRMW36:shared_process":[],"2DR7P8QFZ:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}